= Documentation Contribution Guide
:navtitle: Contributing
:toc: left
:toclevels: 3

This guide explains how to contribute to Boost.TypeLayout documentation.

== Prerequisites

=== Required Tools

* https://nodejs.org/[Node.js] (v16 or later)
* https://antora.org/[Antora] (`npm i -g @antora/cli @antora/site-generator`)
* Git

=== Optional Tools

* A text editor with Asciidoc support (VS Code with AsciiDoc extension)
* https://github.com/asciidoctor/asciidoctor[Asciidoctor] for local preview

== Building the Documentation

=== Quick Start

[source,bash]
----
# From project root
cd doc
npm install
npx antora ../antora-playbook.yml
----

The generated site is in `doc/build/site/`.

=== Using Build Scripts

**Windows:**
[source,cmd]
----
doc\build-docs.cmd
----

**Linux/macOS:**
[source,bash]
----
./doc/build-docs.sh
----

== Documentation Structure

[source]
----
doc/
├── antora.yml                    # Component descriptor
├── modules/
│   └── ROOT/
│       ├── nav.adoc              # Navigation
│       ├── pages/                # Documentation pages
│       │   ├── index.adoc        # Home page
│       │   ├── overview.adoc     # Library overview
│       │   ├── quickstart.adoc   # Quick start guide
│       │   ├── user-guide/       # User guide chapters
│       │   ├── reference/        # API reference
│       │   ├── design/           # Design rationale
│       │   ├── config/           # Configuration
│       │   └── examples/         # Example pages
│       └── examples/             # Example source files
└── antora-playbook.yml           # Playbook (in project root)
----

== Writing Documentation

=== Asciidoc Basics

==== Page Header

Every page should start with:

[source,asciidoc]
----
= Page Title
:navtitle: Short Title

Content starts here...
----

==== Code Blocks

Use language-specific syntax highlighting:

[source,asciidoc]
-----
[source,cpp]
----
#include <boost/typelayout.hpp>

struct Point { int x, y; };
----
-----

==== Cross-References

Use `xref:` for internal links:

[source,asciidoc]
----
See xref:user-guide/layout-signatures.adoc[Layout Signatures] for details.

See xref:reference/core-functions.adoc#get_layout_signature[get_layout_signature].
----

==== Admonitions

[source,asciidoc]
----
NOTE: This is a note.

WARNING: This is a warning.

TIP: This is a tip.

IMPORTANT: This is important.

CAUTION: This requires caution.
----

=== Style Guidelines

1. **Use active voice** - "The function returns..." not "The value is returned..."
2. **Be concise** - Avoid unnecessary words
3. **Include examples** - Every concept should have a code example
4. **Test code examples** - All code must compile with a P2996 compiler
5. **Use consistent terminology**:
   - "layout signature" not "type signature" or "signature string"
   - "portable" not "platform-independent"
   - "bit-field" (hyphenated) not "bitfield"

=== Adding New Pages

1. Create the `.adoc` file in the appropriate directory
2. Add to `nav.adoc` if it should appear in navigation
3. Update any related "See Also" sections
4. Run the build to verify

=== Including Example Code

Put reusable code in `examples/`:

[source,asciidoc]
----
[source,cpp]
----
\include::example$basic_example.cpp[tags=point]
----
----

Tag code sections like this:

[source,cpp]
----
// tag::point[]
struct Point { int x, y; };
// end::point[]
----

== Testing Changes

=== Verify Build

[source,bash]
----
npx antora antora-playbook.yml --log-level=warn
----

A successful build produces no output. Any warnings or errors must be fixed.

=== Verify Links

All `xref:` links are validated during build. Fix any "target of xref not found" errors.

=== Verify Code Examples

If you have access to a P2996 compiler:

[source,bash]
----
cd doc/modules/ROOT/examples
clang++ -std=c++26 -freflection -I ../../../../include basic_example.cpp -o test
./test
----

== Submitting Changes

1. Fork the repository
2. Create a feature branch: `git checkout -b doc/my-improvement`
3. Make your changes
4. Test the build locally
5. Commit with a clear message: `git commit -m "doc: add section on X"`
6. Submit a pull request

=== Commit Message Format

Use conventional commits for documentation:

* `doc: add new section` - Adding content
* `doc: fix typo in X` - Fixing errors
* `doc: update for version Y` - Version-related updates
* `doc: improve clarity of Z` - Rewrites for clarity

== Need Help?

* Check existing documentation for patterns
* Review https://docs.asciidoctor.org/asciidoc/latest/[Asciidoctor documentation]
* Review https://docs.antora.org/[Antora documentation]
* Open an issue for guidance
